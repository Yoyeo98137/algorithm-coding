<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>code - insert_sort</title>
</head>

<body>
    <script>
        (function () {

            // 插入排序
            const insertionSort = array => {
                const len = array.length;
                if (len <= 1) return

                let preIndex, current;
                // 由于要取 上一个 元素作为待比较的目标，所以这里从下标 1 开始循环，小于 数组长度 结束
                for (let i = 1; i < len; i++) {
                    // 为什么是取上一个元素的下标而不是上一个元素的值，因为要通过下标确定插入位置
                    preIndex = i - 1;  // 待比较元素的下标
                    current = array[i];  // 当前元素 相当于拿个变量 '保存' 一下 当前元素，准备后面插入位置

                    // 待比较元素下标 存在 且 待比较元素的值大于当前元素
                    while (preIndex >= 0 && array[preIndex] > current) {
                        // 将原本 当前元素 位置的值赋值为上一个 待比较元素 此时原先元素下标存储的值与待比较值相同
                        array[preIndex + 1] = array[preIndex];
                        preIndex--;  // 游标前移一位
                    }

                    // 这段好像不是必要的
                    // if (preIndex + 1 != i) {
                    //     // 避免同一个元素赋值给自身
                    //     array[preIndex + 1] = current;  // 将当前元素插入预留空位
                    //     console.log('array: ', array);
                    // }

                    // 拿到最后一次比较的 待比较元素，再其后面即 下标 +1 位置插入保存的当前元素
                    array[preIndex + 1] = current;  // 将当前元素插入预留空位
                    console.log('array: ', array);
                }
                return array;
            };

            // 测试
            const array = [5, 4, 3, 2, 1];
            console.log("原始 array :", array);
            insertionSort(array);
            // 原始 array:      [5, 4, 3, 2, 1]
            // array:           [4, 5, 3, 2, 1]
            // array:           [3, 4, 5, 2, 1]
            // array:           [2, 3, 4, 5, 1]
            // array:           [1, 2, 3, 4, 5]

        })()
    </script>
</body>

</html>